# 2025-03-otus-spring-cherney

- [x] Реализовать все репозитории с пощомью Spring JPA
- [ ] Добавить сущность "Комментарии к кнгие" (М:1) со всеми CRUD-методами(findAll() не нужно). Нужно findById и findByBOokId
- [ ] комментария по id и всех комментариев по конкретной книге по ее id
  Загрузка связей сущностей не должна приводить к большому количеству запросов к БД или избыточному по объему набору данных (проблема N+1 и проблема произведения таблиц)
- [x DDL через Hibernate должно быть отключено
- [ ] LAZY-связи не должны присутствовать в equals/hashCode/toString. В т.ч. за счет @Data
- Проблема N+1 должна быть решена теми же способами, что и в прошлой работе, но уже через инструменты, предоставляемыми ORM
- Покрыть все репозитории тестами, используя H2 базу данных и @DataJpaTest
- В тестах репозиториев, для проверки или подготовки данных использовать TestEntityManager (только методы не требующие написания запросов). Сами репозитории для этого использовать нельзя
- Написать интеграционные тесты сервисов книг и комментариев, где проверить, что доступ к связям, которые используются снаружи серивсов не вызывают LazyInitialzationException
- Не забыть учесть в тестах, что тестовый контекст кэшируется, т.е. должны проходить как все тесты разом, так и по отдельности
- Для приема работы тесты из заготовки должны проходить